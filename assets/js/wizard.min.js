!function(e){"use strict";var r,o={preset:null,background_mode:"solid",background_color:"#f0f0f1",gradient_type:"linear",gradient_angle:135,gradient_position:"center center",background_gradient_1:"#667eea",background_gradient_2:"#764ba2",background_image_id:0,background_image_url:"",background_image_size:"cover",background_image_pos:"center",background_image_repeat:"no-repeat",background_blur:0,form_bg_color:"#ffffff",form_border_radius:0,form_border_color:"#c3c4c7",label_text_color:"#1e1e1e",form_shadow_enable:0,form_shadow_color:"rgba(0,0,0,0.25)",input_bg_color:"#ffffff",input_text_color:"#1e1e1e",input_border_color:"#8c8f94",button_bg:"#2271b1",button_bg_hover:"#135e96",button_text_color:"#ffffff",button_border_radius:3,logo_id:0,logo_url:"",logo_width:84,logo_height:84,logo_border_radius:0,logo_bottom_margin:25,logo_background_enable:0,logo_background_color:"",logo_padding:0,glass_enabled:0,glass_blur:10,glass_transparency:85,background_overlay_enable:0,background_overlay_color:"#000000",background_overlay_opacity:50},t={currentStep:1,totalSteps:3,isPro:!1,settings:e.extend(!0,{},o)};function a(e,r){"function"==typeof window.ldwpUpdatePreview&&window.ldwpUpdatePreview(e,r)}function n(){var r=t.settings,o=e.extend({},r);"image"===r.background_mode?o.background_image=r.background_image_url||"":o.background_image="",r.logo_url&&(o.logo_image=r.logo_url),o.gradient_type||(o.gradient_type="linear"),o.gradient_angle||(o.gradient_angle=135),o.gradient_position||(o.gradient_position="center center"),"function"==typeof window.ldwpUpdatePreviewBatch?window.ldwpUpdatePreviewBatch(o):e.each(o,function(e,r){a(e,r)})}function i(){e(".ldwp-wizard-color").each(function(){var r=e(this);r.hasClass("wp-color-picker")||r.wpColorPicker({change:function(r,o){var n=e(this),i=n.data("setting"),d=o.color.toString();(n.val(d),n.trigger("input"),"logo_background_color"===i)&&(e('input[data-setting="logo_background_enable"]').is(":checked")&&e(".ldwp-wizard-logo-img").css("background-color",d));"background_overlay_color"===i&&(t.settings.background_overlay_color=d,a("background_overlay_color",d))},clear:function(){var r=e(this).prev();r.val("").trigger("change"),"logo_background_color"===r.data("setting")&&e(".ldwp-wizard-logo-img").css("background-color","transparent")}})}),e(".ldwp-wizard-toggle").off("change.wizard").on("change.wizard",function(){var r=e(this),o=r.data("setting"),n=r.is(":checked"),i=n?1:0;if("logo_background_enable"===o)if(n){e(".ldwp-wizard-logo-bg-group").slideDown(200);var d=e('input[data-setting="logo_background_color"]').val(),g=e('input[data-setting="logo_padding"]').val();e(".ldwp-wizard-logo-img").css({"background-color":d||"transparent",padding:(g||0)+"px"})}else e(".ldwp-wizard-logo-bg-group").slideUp(200),e(".ldwp-wizard-logo-img").css({"background-color":"transparent",padding:"0px"});"background_overlay_enable"===o&&(n?(e(".ldwp-wizard-overlay-options").slideDown(200,function(){var r=e(this).find(".ldwp-wizard-color");r.length&&!r.hasClass("wp-color-picker")&&r.wpColorPicker({change:function(e,r){var o=r.color.toString();t.settings.background_overlay_color=o,a("background_overlay_color",o)},clear:function(){t.settings.background_overlay_color="#000000",a("background_overlay_color","#000000")}})}),a("background_overlay_enable",1),a("background_overlay_color",t.settings.background_overlay_color||"#000000"),a("background_overlay_opacity",t.settings.background_overlay_opacity||50)):(e(".ldwp-wizard-overlay-options").slideUp(200),a("background_overlay_enable",0))),o&&t.settings.hasOwnProperty(o)&&(t.settings[o]=i)}),e('.ldwp-wizard-toggle[data-setting="logo_background_enable"]').each(function(){e(this).is(":checked")?e(".ldwp-wizard-logo-bg-group").show():e(".ldwp-wizard-logo-bg-group").hide()})}function d(){t.currentStep=1,e(".ldwp-wizard-inline").addClass("is-visible").show(),e(".ldwp-settings-cards").hide(),e("body").addClass("ldwp-wizard-active"),c(),i()}function g(){e(".ldwp-wizard-inline").removeClass("is-visible").hide(),e(".ldwp-settings-cards").show(),e("body").removeClass("ldwp-wizard-active")}function l(){t.currentStep<t.totalSteps?(t.currentStep++,c()):t.currentStep===t.totalSteps&&u()}function s(){t.currentStep>1&&(t.currentStep--,c())}function c(){e(".ldwp-wizard-step-indicator").text("Step "+t.currentStep+" of "+t.totalSteps),e(".ldwp-wizard-step").removeClass("is-active"),e('.ldwp-wizard-step[data-step="'+t.currentStep+'"]').addClass("is-active"),e(".ldwp-wizard-dot").each(function(r){var o=e(this);o.removeClass("is-active is-complete"),r+1===t.currentStep?o.addClass("is-active"):r+1<t.currentStep&&o.addClass("is-complete")});var r=e(".ldwp-wizard-btn-prev"),o=e(".ldwp-wizard-btn-next"),a=e(".ldwp-wizard-btn-apply");if(1===t.currentStep?r.css("visibility","hidden"):(r.css("visibility","visible"),r.show()),t.currentStep===t.totalSteps?(o.hide(),a.show()):(o.show(),a.hide()),3===t.currentStep){var n=t.settings,i="gradient"===n.background_mode?"linear-gradient(135deg, "+n.background_gradient_1+", "+n.background_gradient_2+")":n.background_color;e(".ldwp-wizard-logo-section").css({background:i,padding:"30px","border-radius":"12px"}),e(".ldwp-wizard-logo-upload-area").css({background:n.form_bg_color,"border-radius":(n.form_border_radius||4)+"px"});var d=!!n.logo_background_enable,g={"border-radius":(n.logo_border_radius||0)+"px","background-color":d&&n.logo_background_color||"transparent",padding:d?(n.logo_padding||0)+"px":"0px"};e(".ldwp-wizard-logo-img").css(g)}t.currentStep===t.totalSteps&&function(){var r=e(".ldwp-wizard-final-preview-box"),o=e(".ldwp-wizard-final-preview"),a=t.settings,n="",i="none",d="",g="",l="";if("gradient"===a.background_mode){var s=a.gradient_type||"linear",c=a.gradient_angle||135,p=a.gradient_position||"center center",u=a.background_gradient_1,_=a.background_gradient_2;n="linear"===s?"linear-gradient("+c+"deg, "+u+", "+_+")":"radial"===s?"radial-gradient(circle at "+p+", "+u+", "+_+")":"linear-gradient("+c+"deg, "+u+", "+_+")"}else"image"===a.background_mode?(n=a.background_color,a.background_image_url&&(i="url("+a.background_image_url+")",d="cover",g="center",l="no-repeat")):n=a.background_color;o.css({background:n,"background-image":i,"background-size":d,"background-position":g,"background-repeat":l});var w={"background-color":a.form_bg_color,"border-radius":(a.form_border_radius||4)+"px",border:"1px solid "+(a.form_border_color||"#c3c4c7"),padding:"24px"};a.form_shadow_enable?w["box-shadow"]="0 4px 24px "+(a.form_shadow_color||"rgba(0,0,0,0.25)"):w["box-shadow"]="none";r.css(w);var b=o.find(".preview-logo");b.css("text-align","center"),a.logo_url?b.html('<img src="'+a.logo_url+'" style="max-width: 84px; max-height: 84px; display: inline-block;">'):b.html('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 122.52 122.523" width="84" height="84" style="display: inline-block;"><circle fill="#2271b1" cx="61.26" cy="61.26" r="61.26"/><path fill="#fff" d="M61.262 8.805c28.939 0 52.455 23.516 52.455 52.455s-23.516 52.455-52.455 52.455S8.807 90.199 8.807 61.26 32.323 8.805 61.262 8.805z"/><path fill="#2271b1" d="M61.262 14.805c25.663 0 46.455 20.792 46.455 46.455s-20.792 46.455-46.455 46.455S14.807 86.923 14.807 61.26s20.792-46.455 46.455-46.455z"/></svg>');!a.logo_background_color||1!=a.logo_background_enable&&"1"!==a.logo_background_enable&&!0!==a.logo_background_enable?b.find("img, svg").css("background-color","transparent"):b.find("img, svg").css("background-color",a.logo_background_color);a.logo_padding&&(a.logo_background_enable&&"0"!=a.logo_background_enable?b.find("img, svg").css("padding",a.logo_padding+"px"):b.find("img, svg").css("padding","0"));r.find(".preview-label").css("color",a.label_text_color),r.find(".preview-input").css({"background-color":a.input_bg_color,color:a.input_text_color,border:"1px solid "+(a.input_border_color||"#8c8f94"),"border-radius":"4px"}),r.find(".preview-button").css({"background-color":a.button_bg,color:a.button_text_color,"border-radius":(a.button_border_radius||3)+"px"});var m=t.settings.preset?presets[t.settings.preset].name:"Custom";e(".ldwp-wizard-summary-preset").text(m),e(".ldwp-wizard-summary-bg").css("background",n),e(".ldwp-wizard-summary-form").css("background-color",a.form_bg_color),e(".ldwp-wizard-summary-button").css("background-color",a.button_bg)}()}function p(){var r=t.settings.background_mode||"solid";(e(".ldwp-wizard-bg-type-option").removeClass("is-active"),e('.ldwp-wizard-bg-type-option[data-value="'+r+'"]').addClass("is-active"),e(".ldwp-wizard-bg-panel").removeClass("is-active"),e('.ldwp-wizard-bg-panel[data-panel="'+r+'"]').addClass("is-active"),e(".ldwp-wizard-color").each(function(){var r=e(this),o=r.data("setting");if(o&&t.settings.hasOwnProperty(o)){var a=t.settings[o];r.val(a),r.data("wpWpColorPicker")&&r.wpColorPicker("color",a)}}),e(".ldwp-wizard-range").each(function(){var r=e(this),o=r.data("setting");if(o&&t.settings.hasOwnProperty(o)){var a=t.settings[o];r.val(a);var n=r.closest(".ldwp-wizard-range-wrapper").find(".ldwp-wizard-range-value");"gradient_angle"===o?n.text(a+"°"):["background_blur","logo_bottom_margin","logo_border_radius","logo_padding"].includes(o)?n.text(a+"px"):n.text(a)}}),e(".ldwp-wizard-number").each(function(){var r=e(this),o=r.data("setting");o&&t.settings.hasOwnProperty(o)&&r.val(t.settings[o])}),e(".ldwp-wizard-toggle").each(function(){var r=e(this),o=r.data("setting");if(o&&t.settings.hasOwnProperty(o)){var a=!!t.settings[o];r.prop("checked",a),r.trigger("change.wizard")}}),t.settings.gradient_type)&&e('.ldwp-wizard-select[data-setting="gradient_type"]').val(t.settings.gradient_type).trigger("change");t.settings.logo_url?(e(".ldwp-wizard-logo-thumb-img").attr("src",t.settings.logo_url).show(),e(".ldwp-wizard-logo-placeholder").hide(),e(".ldwp-wizard-logo-remove").show()):(e(".ldwp-wizard-logo-thumb-img").attr("src","").hide(),e(".ldwp-wizard-logo-placeholder").show(),e(".ldwp-wizard-logo-remove").hide())}function u(){var r=t.settings,o=e('input[name="logindesignerwp_settings[background_mode]"][value="'+r.background_mode+'"]');o.length&&o.prop("checked",!0).trigger("change");var a=e(".ldwp-bg-type-selector, .logindesignerwp-bg-type-selector");if(a.length&&(a.find(".ldwp-bg-type-option, label").removeClass("is-active"),a.find('[data-value="'+r.background_mode+'"]').addClass("is-active")),e('input[name="logindesignerwp_settings[background_color]"]').val(r.background_color).trigger("change"),e('input[name="logindesignerwp_settings[background_gradient_1]"]').val(r.background_gradient_1).trigger("change"),e('input[name="logindesignerwp_settings[background_gradient_2]"]').val(r.background_gradient_2).trigger("change"),e('select[name="logindesignerwp_settings[gradient_type]"]').val(r.gradient_type).trigger("change"),e('input[name="logindesignerwp_settings[gradient_angle]"]').val(r.gradient_angle).trigger("input"),e('select[name="logindesignerwp_settings[gradient_position]"]').val(r.gradient_position).trigger("change"),r.background_image_id){e('input[name="logindesignerwp_settings[background_image_id]"]').val(r.background_image_id);var n=e(".logindesignerwp-image-preview");n.length&&r.background_image_url&&n.html('<img src="'+r.background_image_url+'" style="max-width: 200px;">').show()}e('select[name="logindesignerwp_settings[background_image_size]"]').val(r.background_image_size).trigger("change"),e('select[name="logindesignerwp_settings[background_image_pos]"]').val(r.background_image_pos).trigger("change"),e('select[name="logindesignerwp_settings[background_image_repeat]"]').val(r.background_image_repeat).trigger("change"),e('input[name="logindesignerwp_settings[background_blur]"]').val(r.background_blur).trigger("input"),e('input[name="logindesignerwp_settings[form_bg_color]"]').val(r.form_bg_color).trigger("change"),e('input[name="logindesignerwp_settings[form_border_radius]"]').val(r.form_border_radius).trigger("input"),e('input[name="logindesignerwp_settings[form_border_color]"]').val(r.form_border_color).trigger("change");var i=e('input[name="logindesignerwp_settings[glass_enabled]"]'),d=e('input[name="logindesignerwp_settings[glass_blur]"]'),l=e('input[name="logindesignerwp_settings[glass_transparency]"]');if(i.length&&i.prop("checked",!!r.glass_enabled).trigger("change"),d.length&&void 0!==r.glass_blur&&d.val(r.glass_blur).trigger("input"),l.length&&void 0!==r.glass_transparency&&l.val(r.glass_transparency).trigger("input"),e('input[name="logindesignerwp_settings[label_text_color]"]').val(r.label_text_color).trigger("change"),e('input[name="logindesignerwp_settings[input_bg_color]"]').val(r.input_bg_color).trigger("change"),e('input[name="logindesignerwp_settings[input_text_color]"]').val(r.input_text_color).trigger("change"),e('input[name="logindesignerwp_settings[input_border_color]"]').val(r.input_border_color).trigger("change"),e('input[name="logindesignerwp_settings[button_bg]"]').val(r.button_bg).trigger("change"),e('input[name="logindesignerwp_settings[button_bg_hover]"]').val(r.button_bg_hover).trigger("change"),e('input[name="logindesignerwp_settings[button_text_color]"]').val(r.button_text_color).trigger("change"),e('input[name="logindesignerwp_settings[button_border_radius]"]').val(r.button_border_radius).trigger("input"),r.logo_id){e('input[name="logindesignerwp_settings[logo_id]"]').val(r.logo_id);var s=e(".logindesignerwp-logo-preview");s.length&&r.logo_url&&s.html('<img src="'+r.logo_url+'" style="max-width: 200px;">').show()}e('input[name="logindesignerwp_settings[logo_width]"]').val(r.logo_width).trigger("input"),e('input[name="logindesignerwp_settings[logo_height]"]').val(r.logo_height).trigger("input"),e('input[name="logindesignerwp_settings[logo_border_radius]"]').val(r.logo_border_radius).trigger("input"),e('input[name="logindesignerwp_settings[logo_bottom_margin]"]').val(r.logo_bottom_margin).trigger("input");var c=e('input[name="logindesignerwp_settings[logo_padding]"]');c.length&&c.val(r.logo_padding).trigger("input");var p=r.logo_background_color;r.logo_background_enable&&"0"!=r.logo_background_enable||(p=""),e('input[name="logindesignerwp_settings[logo_background_color]"]').val(p).trigger("change"),"function"==typeof window.updatePreview&&updatePreview("logo_background_color",p);var u=e('input[name="logindesignerwp_settings[logo_background_enable]"]');u.length&&u.val(r.logo_background_enable?"1":"0"),e(".wp-color-picker").each(function(){var r=e(this);if(r.attr("name"))try{r.wpColorPicker("color",r.val())}catch(e){}}),"function"==typeof window.updatePreview&&(updatePreview("form_bg_color",r.form_bg_color),updatePreview("form_border_color",r.form_border_color),updatePreview("input_bg_color",r.input_bg_color),updatePreview("input_border_color",r.input_border_color),updatePreview("button_bg",r.button_bg),updatePreview("button_bg_hover",r.button_bg_hover),updatePreview("label_text_color",r.label_text_color),updatePreview("background_color",r.background_color),updatePreview("background_mode",r.background_mode)),g();var _=e('<div class="ldwp-wizard-toast">✨ Design applied! Click Save to keep your changes.</div>');_.css({position:"fixed",bottom:"20px",right:"20px",background:"#22c55e",color:"white",padding:"16px 24px","border-radius":"8px","font-size":"14px","font-weight":"500","box-shadow":"0 4px 12px rgba(34, 197, 94, 0.4)","z-index":"100001",animation:"slideIn 0.3s ease"}),e("body").append(_),setTimeout(function(){_.fadeOut(300,function(){e(this).remove()})},4e3)}e(document).on("click",".ldwp-wizard-ai-banner",function(){e(this).hasClass("is-locked")?alert("Unlock the Magic! ✨\n\nUpgrade to Pro to use the AI Theme Generator."):(e(".ldwp-ai-modal").fadeIn(200).css("display","flex"),e("#ldwp-ai-prompt").focus())}),e(".ldwp-ai-cancel").on("click",function(){e(".ldwp-ai-modal").fadeOut(200)}),e(".ldwp-ai-generate").on("click",function(){var r=e("#ldwp-ai-prompt"),a=r.val().trim();if(a){r.css("border-color","#ddd");var i=e(this),d=i.text();i.text("Generating Magic...").prop("disabled",!0),e.ajax({url:ajaxurl,type:"POST",data:{action:"logindesignerwp_generate_theme",nonce:logindesignerwp_ajax.nonce,prompt:a},success:function(r){if(r.success){var g=r.data.theme;i.text("Saving Preset..."),e.ajax({url:ajaxurl,type:"POST",data:{action:"logindesignerwp_save_preset",nonce:logindesignerwp_ajax.nonce,name:a,settings:g},success:function(r){if(r.success){var l=r.data.id,s='<div class="ldwp-wizard-preset is-custom" data-preset="'+l+'" data-name="'+a.replace(/"/g,"&quot;")+'">';s+='<div class="ldwp-wizard-preset-preview" style="',s+="background: "+("gradient"===g.background_mode?"linear-gradient("+(g.gradient_angle||135)+"deg, "+(g.background_gradient_1||"#fff")+", "+(g.background_gradient_2||"#000")+")":g.background_color||"#fff")+"; ",s+='">',s+='<div class="mini-form" style="background: '+(g.form_bg_color||"#fff")+"; border: "+(g.form_border_color?"1px solid "+g.form_border_color:"none")+';">',s+='<div class="mini-input" style="background: '+(g.input_bg_color||"#fff")+';"></div>',s+='<div class="mini-input" style="background: '+(g.input_bg_color||"#fff")+';"></div>',s+='<div class="mini-button" style="background: '+(g.button_bg||"#000")+';"></div>',s+="</div></div>";var c=e(s+="</div>");e(".ldwp-wizard-presets").prepend(c),c.trigger("click"),t.settings=e.extend({},o,g),t.settings.preset=l,n(),e(".ldwp-ai-modal").fadeOut(200),i.text(d).prop("disabled",!1),e("#ldwp-ai-prompt").val("");var p=e('<div class="ldwp-wizard-toast">✨ Preset Saved: '+a+"</div>");p.css({position:"fixed",bottom:"20px",right:"20px",background:"#10b981",color:"white",padding:"16px 24px","border-radius":"8px","font-size":"14px","font-weight":"500","box-shadow":"0 4px 12px rgba(16, 185, 129, 0.4)","z-index":"100001",animation:"slideIn 0.3s ease"}),e("body").append(p),setTimeout(function(){p.fadeOut(300,function(){e(this).remove()})},3e3),setTimeout(function(){e('.ldwp-wizard-dot[data-step="2"]').trigger("click")},500)}else alert("Failed to save preset: "+(r.data||"Unknown error")),i.text(d).prop("disabled",!1)},error:function(e,r,o){alert("Network error while saving preset."),i.text(d).prop("disabled",!1)}})}else alert("AI Generation Failed: "+(r.data||"Unknown error")),i.text(d).prop("disabled",!1)},error:function(){alert("Network error during AI generation. Please try again."),i.text(d).prop("disabled",!1)}})}else r.css("border-color","#d63638").focus()}),e(document).ready(function(){t.isPro="undefined"!=typeof logindesignerwp_wizard&&logindesignerwp_wizard.isPro,e(document).on("click",".ldwp-start-wizard-btn",d),e(document).on("click",".ldwp-wizard-exit-btn",function(e){e.preventDefault(),g()}),e(document).on("click",".ldwp-wizard-next",l),e(document).on("click",".ldwp-wizard-prev",s),e(document).on("click",".ldwp-wizard-apply",u),e(document).on("click",".ldwp-wizard-preset:not(.is-locked)",function(){var r=e(this);e(".ldwp-wizard-preset").removeClass("is-selected"),r.addClass("is-selected"),function(r){var a={},i="";if(r&&(r.nodeType||r instanceof jQuery)){var d=e(r);a=d.data("settings"),i=d.data("preset"),a&&(t.settings=e.extend(!0,{},o,a),t.settings.preset=i,n(),p())}}(this)}),e(document).on("click",".ldwp-wizard-collapsible-toggle",function(){var r=e(this).closest(".ldwp-wizard-collapsible"),o=r.find(".ldwp-wizard-collapsible-content");r.toggleClass("is-open"),o.slideToggle(200),r.hasClass("is-open")&&i()}),e(document).on("click",".ldwp-wizard-bg-type-option",function(){var r=e(this),o=r.closest(".ldwp-wizard-bg-type-selector"),n=r.data("value");o.find(".ldwp-wizard-bg-type-option").removeClass("is-active"),r.addClass("is-active"),t.settings.background_mode=n,e(".ldwp-wizard-bg-panel").removeClass("is-active"),e('.ldwp-wizard-bg-panel[data-panel="'+n+'"]').addClass("is-active"),a("background_mode",n)}),e(document).on("change",'.ldwp-wizard-select[data-setting="gradient_type"]',function(){var r=e(this).val();t.settings.gradient_type=r,"radial"===r?(e(".ldwp-wizard-gradient-linear-opt").hide(),e(".ldwp-wizard-gradient-radial-opt").show()):(e(".ldwp-wizard-gradient-linear-opt").show(),e(".ldwp-wizard-gradient-radial-opt").hide()),a("gradient_type",r)}),e(document).on("click",".ldwp-wizard-randomize-btn",function(){var r="#"+Math.floor(16777215*Math.random()).toString(16).padStart(6,"0"),o="#"+Math.floor(16777215*Math.random()).toString(16).padStart(6,"0");t.settings.background_gradient_1=r,t.settings.background_gradient_2=o;var n=e(this).closest(".ldwp-wizard-bg-panel");n.find('[data-setting="background_gradient_1"]').val(r).trigger("change"),n.find('[data-setting="background_gradient_2"]').val(o).trigger("change"),a("background_gradient_1",r),a("background_gradient_2",o)}),e(document).on("change",".ldwp-wizard-color",function(){var r=e(this),o=r.data("setting"),n=r.val();o&&t.settings.hasOwnProperty(o)&&(t.settings[o]=n,a(o,n))}),e(document).on("change",".ldwp-wizard-select",function(){var r=e(this),o=r.data("setting"),a=r.val();o&&t.settings.hasOwnProperty(o)&&(t.settings[o]=a)}),e(document).on("change input",".ldwp-wizard-number",function(){var r=e(this),o=r.data("setting"),n=parseInt(r.val(),10);o&&t.settings.hasOwnProperty(o)&&(t.settings[o]=n,a(o,n))}),e(document).on("input",".ldwp-wizard-range",function(){var r=e(this),o=r.data("setting"),n=parseInt(r.val(),10),i=r.closest(".ldwp-wizard-range-wrapper").find(".ldwp-wizard-range-value");"gradient_angle"===o?i.text(n+"°"):"background_blur"===o||"logo_bottom_margin"===o?i.text(n+"px"):"background_overlay_opacity"===o?i.text(n+"%"):i.text(n),o&&t.settings.hasOwnProperty(o)&&(t.settings[o]=n,a(o,n))}),e(document).on("click",".ldwp-wizard-corner-option",function(){var r=e(this),o=r.closest(".ldwp-wizard-corner-selector"),n=o.data("setting"),i=parseInt(r.data("value"),10);o.find(".ldwp-wizard-corner-option").removeClass("is-active"),r.addClass("is-active"),n&&t.settings.hasOwnProperty(n)&&(t.settings[n]=i,a(n,i))}),e(document).on("click",".ldwp-wizard-logo-btn",function(o){o.preventDefault(),r||(r=wp.media({title:"Choose Logo",button:{text:"Use this logo"},multiple:!1})).on("select",function(){var o=r.state().get("selection").first().toJSON();t.settings.logo_id=o.id,t.settings.logo_url=o.url,e(".ldwp-wizard-logo-thumb-img").attr("src",o.url).show(),e(".ldwp-wizard-logo-placeholder").hide(),e(".ldwp-wizard-logo-remove").show(),a("logo_image",o.url)}),r.open()}),e(document).on("click",".ldwp-wizard-logo-remove",function(r){r.preventDefault(),t.settings.logo_id=0,t.settings.logo_url="",e(".ldwp-wizard-logo-thumb-img").attr("src","").hide(),e(".ldwp-wizard-logo-placeholder").show(),e(this).hide(),a("logo_image","")}),e(document).on("click",".ldwp-wizard-image-btn",function(){var r;(r=wp.media({title:"Choose Background Image",button:{text:"Use this image"},multiple:!1})).on("select",function(){var o=r.state().get("selection").first().toJSON();t.settings.background_image_id=o.id,t.settings.background_image_url=o.url,e(".ldwp-wizard-image-preview img").attr("src",o.url),e(".ldwp-wizard-image-preview").show(),a("background_image",o.url)}),r.open()}),e(document).on("click",".ldwp-wizard-image-remove",function(){t.settings.background_image_id=0,t.settings.background_image_url="",e(".ldwp-wizard-image-preview").hide(),a("background_image","")}),e(document).on("click",".ldwp-wizard-ai-generate-btn",function(){var r,o;r=e(this),(o=window.prompt("Describe the background image you want AI to generate:"))&&(r.closest(".ldwp-wizard-upload-buttons"),r.prop("disabled",!0).text("Generating..."),e.ajax({url:ajaxurl,type:"POST",data:{action:"logindesignerwp_generate_background",nonce:e('input[name="logindesignerwp_nonce"]').val()||("undefined"!=typeof logindesignerwp_ajax?logindesignerwp_ajax.nonce:""),prompt:o},success:function(o){r.prop("disabled",!1).html('<span class="dashicons dashicons-superhero"></span> AI Generate'),o.success?(t.settings.background_image_id=o.data.id,t.settings.background_image_url=o.data.url,e(".ldwp-wizard-image-preview img").attr("src",o.data.medium_url||o.data.url),e(".ldwp-wizard-image-preview").show(),a("background_image",o.data.url)):alert(o.data||"Failed to generate image.")},error:function(){r.prop("disabled",!1).html('<span class="dashicons dashicons-superhero"></span> AI Generate'),alert("Request failed. Please try again.")}}))}),e(document).on("click",".ldwp-wizard-dot",function(){var r=parseInt(e(this).data("step"),10);r&&r<=t.currentStep+1&&r>=1&&(t.currentStep=r,c())})})}(jQuery);