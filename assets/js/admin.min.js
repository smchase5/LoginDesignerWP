!function(e){"use strict";var n,i,o,t,a,r,s,l,g,d,c={bgMode:"",bgColor:"",gradient1:"",gradient2:"",gradient3:"",gradientType:"linear",gradientAngle:135,gradientPosition:"center center",bgImage:""},p=function(){var n=null,i=null,o=null,t=null,a=null,r=!1,s=!0,l=!0,g=null,d=null,c=700,p="is-pulsing",u="is-updating",b="is-unsaved",_="Preview",f="Syncingâ€¦",w="Saved",v="Unsaved";function m(){n&&n.length&&(clearTimeout(d),clearTimeout(g),d=setTimeout(function(){r=!1,n.removeClass(u),o.text(_)},50))}function h(){n&&n.length&&s&&(s=!1,n.addClass(b),t.text(v),a&&a.show())}return{init:function(){n=e("#ldwp-preview-status"),i=e(".logindesignerwp-preview-container"),o=n.find(".ldwp-status-text"),t=n.find(".ldwp-save-status"),(a=e("#ldwp-discard-btn")).length&&a.on("click",function(){confirm("Are you sure you want to discard unsaved changes?")&&location.reload()})},start:function(){n&&n.length&&(r||(r=!0,n.addClass(u),o.text(f),function(){if(!i||!i.length)return;i.removeClass(p),i[0].offsetWidth,i.addClass(p),setTimeout(function(){i.removeClass(p)},250)}()),l||h(),clearTimeout(d),clearTimeout(g),g=setTimeout(function(){m()},c))},done:m,markUnsaved:h,markSaved:function(){n&&n.length&&(s=!0,n.removeClass(b),t.text(w),a&&a.hide())},finishInitializing:function(){l=!1}}}();function u(){var n=e("input.ldwp-bg-mode-value"),i=e(".ldwp-bg-type-selector");function o(){var i=n.val();e(".logindesignerwp-bg-options").hide(),e(".logindesignerwp-bg-"+i).show(),b("background_mode",i)}o(),i.on("click",".ldwp-bg-type-option",function(){var t=e(this),a=t.data("value");i.find(".ldwp-bg-type-option").removeClass("is-active"),t.addClass("is-active"),n.val(a),o()}),e("select.logindesignerwp-gradient-type").on("change",function(){var n=e(this).val();e(".logindesignerwp-gradient-opt").hide(),e(".logindesignerwp-gradient-"+n).show(),"mesh"===n?e(".logindesignerwp-mesh-color-3").show():e(".logindesignerwp-mesh-color-3").hide(),b("gradient_type",n)}),e('input[name="logindesignerwp_settings[gradient_angle]"]').on("input change",function(){b("gradient_angle",e(this).val())}),e('select[name="logindesignerwp_settings[gradient_position]"]').on("change",function(){b("gradient_position",e(this).val())}),e("#logindesignerwp-bg-blur").on("input",function(){var n=e(this).val();e(this).siblings(".logindesignerwp-range-value").text(n+"px"),b("background_blur",n)}),e(".logindesignerwp-randomize-gradient").on("click",function(n){n.preventDefault();var i=function(){return"#"+Math.floor(16777215*Math.random()).toString(16).padStart(6,"0")},o=i(),t=i(),a=e('input[name="logindesignerwp_settings[gradient_angle]"]'),r=Math.floor(360*Math.random());a.val(r).trigger("input"),e('input[name="logindesignerwp_settings[background_gradient_1]"]').wpColorPicker("color",o),e('input[name="logindesignerwp_settings[background_gradient_2]"]').wpColorPicker("color",t)})}function b(u,b,w){if(p.start(),w=w||!1,window.ldwpIsBatchUpdating&&(w=!0),n&&n.length||(n=e("#ldwp-preview-bg")).length)switch(u){case"background_mode":c.bgMode=b,e("input.ldwp-bg-mode-value").val(b),w||f();break;case"background_color":c.bgColor=b,e('input[name="logindesignerwp_settings[background_color]"]').val(b),w||f();break;case"background_gradient_1":c.gradient1=b,e('input[name="logindesignerwp_settings[background_gradient_1]"]').val(b),w||f();break;case"background_gradient_2":c.gradient2=b,e('input[name="logindesignerwp_settings[background_gradient_2]"]').val(b),w||f();break;case"background_gradient_3":c.gradient3=b,e('input[name="logindesignerwp_settings[background_gradient_3]"]').val(b),w||f();break;case"gradient_type":c.gradientType=b,e('select[name="logindesignerwp_settings[gradient_type]"]').val(b),w||f();break;case"gradient_angle":c.gradientAngle=b,e('input[name="logindesignerwp_settings[gradient_angle]"]').val(b),w||f();break;case"gradient_position":c.gradientPosition=b,e('select[name="logindesignerwp_settings[gradient_position]"]').val(b),w||f();break;case"background_image":c.bgImage=b,e('input[name="logindesignerwp_settings[background_image]"]').val(b),w||f();break;case"background_blur":w||f();break;case"background_overlay_enable":case"background_overlay_color":case"background_overlay_opacity":if("background_overlay_enable"===u){var v=1==b||"1"===b||!0===b;e('input[name="logindesignerwp_settings[background_overlay_enable]"]').prop("checked",v)}else"background_overlay_color"===u?e('input[name="logindesignerwp_settings[background_overlay_color]"]').val(b):"background_overlay_opacity"===u&&e('input[name="logindesignerwp_settings[background_overlay_opacity]"]').val(b);w||_();break;case"form_bg_color":if(!w){var m=e('input[name="logindesignerwp_settings[glass_enabled]"]');if(m.length&&m.is(":checked")){var h=e('input[name="logindesignerwp_settings[glass_blur]"]').val()||10,x=e('input[name="logindesignerwp_settings[glass_transparency]"]').val()||85,k=1-parseInt(x)/100;if(b&&0===b.indexOf("rgba"))i.css({"background-color":b,"backdrop-filter":"blur("+h+"px)","-webkit-backdrop-filter":"blur("+h+"px)"});else{var y=(b||"#ffffff").replace("#","");3===y.length&&(y=y[0]+y[0]+y[1]+y[1]+y[2]+y[2]);var C="rgba("+(parseInt(y.substring(0,2),16)||255)+","+(parseInt(y.substring(2,4),16)||255)+","+(parseInt(y.substring(4,6),16)||255)+","+k+")";i.css({"background-color":C,"backdrop-filter":"blur("+h+"px)","-webkit-backdrop-filter":"blur("+h+"px)"})}}else i.css("background-color",b)}break;case"form_border_radius":w||i.css("border-radius",b+"px");break;case"form_border_color":w||i.css("border","1px solid "+b);break;case"form_shadow_enable":case"form_shadow_color":if(!w){var z="form_shadow_enable"===u?b:e('input[name="logindesignerwp_settings[form_shadow_enable]"]').is(":checked");if(v=!0===z||"1"===z||1===z||"true"===z||"on"===z){var I="form_shadow_color"===u?b:e('input[name="logindesignerwp_settings[form_shadow_color]"]').val();I||(I="rgba(0,0,0,0.25)"),i.css("box-shadow","0 4px 24px "+I)}else i.css("box-shadow","none")}break;case"label_text_color":w||(t.css("color",b),l.css("color",b));break;case"below_form_link_color":w||(s.css("color",b),e("#ldwp-preview-backtoblog a").css("color",b),e("#ldwp-preview-custom-message").css("color",b));break;case"input_bg_color":w||a.css("background-color",b);break;case"input_text_color":w||a.css("color",b);break;case"input_border_color":w||a.css("border","1px solid "+b);break;case"input_border_focus":d.data("focus-color",b);break;case"button_bg":w||r.css("background-color",b),d.data("button-bg",b);break;case"button_bg_hover":d.data("button-hover",b);break;case"button_text_color":w||r.css("color",b);break;case"button_border_radius":w||r.css("border-radius",b+"px");break;case"logo_image":if(!w){var P=o.find("a");if(b){if(P.css({"background-image":'url("'+b+'")',"background-size":"contain","box-sizing":"content-box","background-origin":"content-box"}),!(j=e('input[name="logindesignerwp_settings[logo_height]"]').val())||0==j)if((A=(D=P.css("background-image")).replace(/^url\(['"]?([^'"]+)['"]?\)/,"$1"))&&"none"!==A){(M=new Image).onload=function(){var n=this.width,i=this.height,o=1;n>0&&i>0&&(o=i/n);var t=e('input[name="logindesignerwp_settings[logo_width]"]').val()||84,a=parseInt(t)*o;!isNaN(a)&&a>0?P.css("height",a+"px"):P.css("height",t+"px")},M.src=A}else{var S=e('input[name="logindesignerwp_settings[logo_width]"]').val()||84;P.css("height",S+"px")}}else{var T=e('input[name="logindesignerwp_settings[logo_width]"]').val()||84;e('input[name="logindesignerwp_settings[logo_height]"]').val();P.css({"background-image":"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 122.52 122.523'%3E%3Cpath fill='%232271b1' d='M8.708 61.26c0 20.802 12.089 38.779 29.619 47.298L13.258 39.872a52.354 52.354 0 00-4.55 21.388zM96.74 58.608c0-6.495-2.333-10.993-4.334-14.494-2.664-4.329-5.161-7.995-5.161-12.324 0-4.831 3.664-9.328 8.825-9.328.233 0 .454.029.681.042-9.35-8.566-21.807-13.796-35.489-13.796-18.36 0-34.513 9.42-43.91 23.688 1.233.037 2.395.063 3.382.063 5.497 0 14.006-.667 14.006-.667 2.833-.167 3.167 3.994.337 4.329 0 0-2.847.335-6.015.501L48.2 93.547l11.501-34.493-8.188-22.434c-2.83-.166-5.511-.501-5.511-.501-2.832-.166-2.5-4.496.332-4.329 0 0 8.679.667 13.843.667 5.496 0 14.006-.667 14.006-.667 2.835-.167 3.168 3.994.337 4.329 0 0-2.853.335-6.015.501l18.992 56.494 5.242-17.517c2.272-7.269 4.001-12.49 4.001-16.989z'/%3E%3Cpath fill='%232271b1' d='M62.184 65.857l-15.768 45.819a52.552 52.552 0 0032.29-.838 4.693 4.693 0 01-.37-.712L62.184 65.857zM107.376 36.046a42.584 42.584 0 01.358 5.708c0 5.651-1.057 12.002-4.229 19.94l-16.973 49.082c16.519-9.627 27.618-27.628 27.618-48.18 0-9.762-2.499-18.929-6.774-26.55z'/%3E%3Cpath fill='%232271b1' d='M61.262 0C27.483 0 0 27.481 0 61.26c0 33.783 27.483 61.263 61.262 61.263 33.778 0 61.265-27.48 61.265-61.263C122.526 27.481 95.04 0 61.262 0zm0 119.715c-32.23 0-58.453-26.223-58.453-58.455 0-32.23 26.222-58.451 58.453-58.451 32.229 0 58.45 26.221 58.45 58.451 0 32.232-26.221 58.455-58.45 58.455z'/%3E%3C/svg%3E\")","background-size":"contain","box-sizing":"content-box","background-origin":"content-box"})}}break;case"logo_width":if(!w){var j;T=0==b||""==b?"auto":b+"px";if((P=o.find("a")).css("width",T),e('input[name="logindesignerwp_settings[logo_image]"]').val()||P.css("background-size","contain"),!(j=e('input[name="logindesignerwp_settings[logo_height]"]').val())||0==j)if((D=P.css("background-image"))&&"none"!==D&&0===D.indexOf("url("))if((A=(O=D.match(/url\(['"]?([^'"()]+)['"]?\)/))?O[1]:null)&&0===A.indexOf("http"))(M=new Image).onload=function(){var e=this.width,n=this.height,i=e>0&&n>0?n/e:1,o=parseInt(b)*i;!isNaN(o)&&o>0?P.css("height",o+"px"):P.css("height",b+"px")},M.src=A;else P.css("height",b+"px");else P.css("height",b+"px")}break;case"logo_height":if(!w){P=o.find("a");if(0==b||""==b){var O,A,M,D=P.css("background-image");S=parseInt(e('input[name="logindesignerwp_settings[logo_width]"]').val())||84;if(D&&"none"!==D&&0===D.indexOf("url("))if((A=(O=D.match(/url\(['"]?([^'"()]+)['"]?\)/))?O[1]:null)&&0===A.indexOf("http"))(M=new Image).onload=function(){var e=this.width,n=this.height,i=S*(e>0&&n>0?n/e:1);!isNaN(i)&&i>0?P.css("height",i+"px"):P.css("height",S+"px")},M.src=A;else P.css("height",S+"px");else P.css("height",S+"px")}else P.css("height",b+"px");P.css("background-size","contain")}break;case"logo_padding":o.find("a").css("padding",b+"px");break;case"logo_border_radius":o.find("a").css("border-radius",b+"px");break;case"logo_bottom_margin":o.find("h1, a").css("margin-bottom",b+"px"),o.css("margin-bottom",b+"px");break;case"logo_background_color":o.find("a").css("background-color",b);break;case"logo_background_enable":if(b&&"0"!==b&&0!==b){var K=e('input[name="logindesignerwp_settings[logo_background_color]"]').val();o.find("a").css("background-color",K)}else o.find("a").css("background-color","transparent");break;case"glass_enabled":case"glass_blur":case"glass_transparency":!function(){var n="glass_enabled"===u?1==b||"1"===b||!0===b:e('input[name="logindesignerwp_settings[glass_enabled]"]').is(":checked"),o="glass_blur"===u?b:e('input[name="logindesignerwp_settings[glass_blur]"]').val()||10,t="glass_transparency"===u?b:e('input[name="logindesignerwp_settings[glass_transparency]"]').val()||85;if(n){var a=1-parseInt(t)/100,r=(e('input[name="logindesignerwp_settings[form_bg_color]"]').val()||"#ffffff").replace("#","");3===r.length&&(r=r[0]+r[0]+r[1]+r[1]+r[2]+r[2]);var s="rgba("+(parseInt(r.substring(0,2),16)||255)+","+(parseInt(r.substring(2,4),16)||255)+","+(parseInt(r.substring(4,6),16)||255)+","+a+")";i.css({"background-color":s,"backdrop-filter":"blur("+o+"px)","-webkit-backdrop-filter":"blur("+o+"px)"})}else{var l=e('input[name="logindesignerwp_settings[form_bg_color]"]').val()||"#ffffff";i.css({"background-color":l,"backdrop-filter":"","-webkit-backdrop-filter":""})}}();break;case"social_login_layout":g.length&&g.attr("data-layout",b);break;case"social_login_shape":g.length&&g.attr("data-shape",b);break;case"social_login_style":g.length&&g.attr("data-style",b);break;case"layout_position_x":case"layout_position_y":var U=e("#ldwp-position-x").val()||"center",E=e("#ldwp-position-y").val()||"center";n.css({display:"flex","flex-direction":"column","justify-content":{top:"flex-start",center:"center",bottom:"flex-end"}[E]||"center","align-items":{left:"flex-start",center:"center",right:"flex-end"}[U]||"center"});break;case"layout_style":i.css("padding",{compact:"12px 16px",standard:"20px",spacious:"28px 32px"}[b]||"20px"),o.css("margin-bottom",{compact:"12px",standard:"25px",spacious:"35px"}[b]||"25px")}}function _(){var i=e("#ldwp-preview-overlay");!i.length&&n&&n.length&&(i=e('<div id="ldwp-preview-overlay"></div>'),n.prepend(i),i.css({position:"absolute",top:"0",left:"0",right:"0",bottom:"0","z-index":"1","pointer-events":"none"}));var o=e('input[name="logindesignerwp_settings[background_overlay_enable]"]').is(":checked"),t=e('input[name="logindesignerwp_settings[background_overlay_color]"]').val()||"#000000",a=e('input[name="logindesignerwp_settings[background_overlay_opacity]"]').val()||50,r=c.bgMode||e("input.ldwp-bg-mode-value").val()||"solid",s=c.bgImage||e('input[name="logindesignerwp_settings[background_image]"]').val();if(o&&"image"===r&&s){var l=t.replace("#","");3===l.length&&(l=l[0]+l[0]+l[1]+l[1]+l[2]+l[2]);var g="rgba("+(parseInt(l.substring(0,2),16)||0)+","+(parseInt(l.substring(2,4),16)||0)+","+(parseInt(l.substring(4,6),16)||0)+","+parseInt(a)/100+")";i.css("background-color",g).show()}else i.hide()}function f(i,o){var t=i||o&&o.background_mode||c.bgMode||e("input.ldwp-bg-mode-value").val()||e('input[name="logindesignerwp_settings[background_mode]"]').val(),a=o&&o.background_color||c.bgColor||e('input[name="logindesignerwp_settings[background_color]"]').val(),r=o&&o.background_gradient_1||c.gradient1||e('input[name="logindesignerwp_settings[background_gradient_1]"]').val(),s=o&&o.background_gradient_2||c.gradient2||e('input[name="logindesignerwp_settings[background_gradient_2]"]').val();t||(t="solid"),a||(a="#ffffff");var l,g,d=c.bgImage||"",p=o&&o.gradient_type||c.gradientType||e('select[name="logindesignerwp_settings[gradient_type]"]').val()||"linear",u=o&&o.gradient_angle||c.gradientAngle||e('input[name="logindesignerwp_settings[gradient_angle]"]').val()||"135",b=o&&o.gradient_position||c.gradientPosition||e('select[name="logindesignerwp_settings[gradient_position]"]').val()||"center center";switch(n.removeClass("has-blur is-mode-solid is-mode-gradient is-mode-image"),n.attr("style",""),t&&n.addClass("is-mode-"+t),t){case"solid":n.css({"background-repeat":"repeat","background-size":"auto","background-position":"0% 0%",filter:"none","--bg-image":"","--bg-blur":""}),n[0].style.setProperty("background-color",a,"important"),n[0].style.setProperty("background-image","none","important");break;case"gradient":var f=(r||"#ffffff").trim(),w=(s||"#000000").trim(),v=parseInt(u)||135,m="";if("linear"===p)m="linear-gradient("+v+"deg, "+f+", "+w+")";else if("radial"===p)m="radial-gradient(circle at "+b+", "+f+", "+w+")";else if("mesh"===p){var h=(e('input[name="logindesignerwp_settings[background_gradient_3]"]').val()||f||f).trim();m="radial-gradient(at top left, "+(l=f)+", transparent 70%), radial-gradient(at bottom right, "+(g=w)+", transparent 70%), radial-gradient(at top right, "+(h||l)+", transparent 70%), linear-gradient(135deg, "+g+", "+l+")"}n.css({"background-repeat":"no-repeat","background-size":"cover","background-position":"center",filter:"none"}),n[0].style.backgroundImage=m,n[0].style.backgroundColor=f,n[0].style.setProperty("background",m,"important"),n[0].style.setProperty("background-image",m,"important"),n[0].style.setProperty("background-color",f,"important"),n[0].style.setProperty("background-size","cover","important"),n[0].style.setProperty("background-repeat","no-repeat","important"),n[0].style.setProperty("background-position","center","important"),n[0].offsetWidth;break;case"image":if(n.css("background-color",a),d){var x=e("#logindesignerwp-bg-blur").val()||0;parseInt(x)>0?(n.addClass("has-blur"),n.css({"--bg-image":"url("+d+")","--bg-blur":x+"px","--bg-blur":x+"px","background-image":"none","background-size":"cover","background-repeat":"no-repeat","background-position":"center"})):(n.removeClass("has-blur"),n.css({"background-image":"url("+d+")","background-size":"cover","background-position":"center","background-repeat":"no-repeat",filter:"none","--bg-image":"","--bg-blur":""}))}else n.css({"background-image":"none","background-size":"auto","background-repeat":"repeat","background-position":"0% 0%"})}_()}function w(){var n={form_bg_color:e('input[name="logindesignerwp_settings[form_bg_color]"]').val(),form_border_radius:e('input[name="logindesignerwp_settings[form_border_radius]"]').val(),form_border_color:e('input[name="logindesignerwp_settings[form_border_color]"]').val(),form_shadow_enable:e('input[name="logindesignerwp_settings[form_shadow_enable]"]').is(":checked"),background_mode:e(".ldwp-bg-mode-value").val(),background_color:e('input[name="logindesignerwp_settings[background_color]"]').val(),label_text_color:e('input[name="logindesignerwp_settings[label_text_color]"]').val(),input_bg_color:e('input[name="logindesignerwp_settings[input_bg_color]"]').val(),input_text_color:e('input[name="logindesignerwp_settings[input_text_color]"]').val(),input_border_color:e('input[name="logindesignerwp_settings[input_border_color]"]').val(),button_bg:e('input[name="logindesignerwp_settings[button_bg]"]').val(),button_text_color:e('input[name="logindesignerwp_settings[button_text_color]"]').val(),button_border_radius:e('input[name="logindesignerwp_settings[button_border_radius]"]').val(),below_form_link_color:e('input[name="logindesignerwp_settings[below_form_link_color]"]').val(),logo_width:e('input[name="logindesignerwp_settings[logo_width]"]').val(),logo_height:e('input[name="logindesignerwp_settings[logo_height]"]').val(),logo_padding:e('input[name="logindesignerwp_settings[logo_padding]"]').val(),logo_border_radius:e('input[name="logindesignerwp_settings[logo_border_radius]"]').val(),logo_bottom_margin:e('input[name="logindesignerwp_settings[logo_bottom_margin]"]').val(),logo_background_color:e('input[name="logindesignerwp_settings[logo_background_color]"]').val(),social_login_layout:e('select[name="logindesignerwp_settings[social_login_layout]"]').val(),social_login_shape:e('select[name="logindesignerwp_settings[social_login_shape]"]').val(),social_login_style:e('select[name="logindesignerwp_settings[social_login_style]"]').val(),background_blur:e("#logindesignerwp-bg-blur").val(),background_overlay_enable:e('input[name="logindesignerwp_settings[background_overlay_enable]"]').is(":checked")?1:0,background_overlay_color:e('input[name="logindesignerwp_settings[background_overlay_color]"]').val()||"#000000",background_overlay_opacity:e('input[name="logindesignerwp_settings[background_overlay_opacity]"]').val()||50},i=e(".logindesignerwp-preview-container").attr("data-bg-image");for(var o in i&&b("background_image",i,!0),n)n.hasOwnProperty(o)&&b(o,n[o]);f(),p.finishInitializing(),e(".logindesignerwp-preview-container").removeClass("is-preview-loading")}function v(){e(document).on("click",".logindesignerwp-ai-text-to-theme",function(n){n.preventDefault();var i=e(this),o=i.find(".dashicons"),t=i.closest(".logindesignerwp-ai-tool-card"),a=window.prompt("Describe your ideal login page theme:\n\nExamples:\nâ€¢ Dark mode with neon green accents\nâ€¢ Minimal and clean with soft blues\nâ€¢ Corporate professional with navy and gold\nâ€¢ Warm sunset gradient feel");if(a){t.find(".logindesignerwp-ai-status").remove();var r=e('<div class="logindesignerwp-ai-status" style="margin-top: 10px; padding: 12px 16px; background: #2271b1; color: #fff; border-radius: 6px; display: flex; align-items: center; gap: 10px; font-size: 13px; box-shadow: 0 2px 8px rgba(34, 113, 177, 0.3);"><span class="dashicons dashicons-update" style="animation: rotation 1s infinite linear;"></span><span class="status-text">Generating your theme with AI...</span></div>');i.after(r),i.prop("disabled",!0),o.removeClass("dashicons-edit").addClass("dashicons-update dashicons-spin"),e.ajax({url:ajaxurl,type:"POST",data:{action:"logindesignerwp_generate_theme",nonce:logindesignerwp_ajax.nonce,prompt:a},success:function(n){if(r.remove(),n.success){var o=n.data.theme;window.confirm("Theme generated! ðŸŽ¨\n\nDo you also want to update the page background color?\n\nâ€¢ Click OK to apply the full theme (including background)\nâ€¢ Click Cancel to keep your current background")||(delete o.background_color,delete o.background_mode),function(n){var i=function(e){var n=[],i=4.5;return[{textKey:"label_color",bgKey:"form_background",pair:"Label on Form"},{textKey:"input_text_color",bgKey:"input_background",pair:"Input Text on Input"},{textKey:"button_text_color",bgKey:"button_color",pair:"Button Text on Button"},{textKey:"link_color",bgKey:"form_background",pair:"Link on Form"}].forEach(function(o){var t,a,r,s,l,g=e[o.textKey],d=e[o.bgKey];if(g&&d){var c=(t=d,a=h(g),r=h(t),s=Math.max(a,r),l=Math.min(a,r),(s+.05)/(l+.05));c<i&&n.push({textKey:o.textKey,bgKey:o.bgKey,pair:o.pair,ratio:c})}}),n}(n);if(i.length>0){i.forEach(function(e){"â€¢ "+e.pair+": "+e.ratio.toFixed(1)+":1 (needs 4.5:1)\n"}),i.forEach(function(e){n[e.textKey]=h(n[e.bgKey])>.179?"#1a1a1a":"#ffffff"})}var o={background_color:{field:"background_color",preview:"background_color"},form_background:{field:"form_bg_color",preview:"form_bg_color"},form_border_radius:{field:"form_border_radius",preview:"form_border_radius"},label_color:{field:"label_text_color",preview:"label_text_color"},input_background:{field:"input_bg_color",preview:"input_bg_color"},input_border_color:{field:"input_border_color",preview:"input_border_color"},input_text_color:{field:"input_text_color",preview:"input_text_color"},button_color:{field:"button_bg",preview:"button_bg"},button_text_color:{field:"button_text_color",preview:"button_text_color"},button_border_radius:{field:"button_border_radius",preview:"button_border_radius"},link_color:{field:"below_form_link_color",preview:"below_form_link_color"}};if(e.each(n,function(n,i){var t=o[n];if(t){var a=e('[name="logindesignerwp_settings['+t.field+']"]');a.length&&(a.val(i),"string"==typeof i&&i.startsWith("#")&&a.wpColorPicker("color",i)),b(t.preview,i)}}),n.background_color){var t=e('[name="logindesignerwp_settings[background_mode]"][value="solid"]');t.length&&t.prop("checked",!0).trigger("change"),b("background_mode","solid"),b("background_color",n.background_color);var a=e('[name="logindesignerwp_settings[background_color]"]');if(a.length){a.val(n.background_color);try{a.wpColorPicker("color",n.background_color)}catch(e){}}}if(void 0!==n.form_shadow){var r=e('[name="logindesignerwp_settings[form_shadow_enable]"]');r.length&&(r.prop("checked",n.form_shadow),b("form_shadow_enable",n.form_shadow?"1":""))}}(o),e(".logindesignerwp-ai-preview-notification").remove();var t=n.data.message||"Theme applied! Click Save to keep it.",a=d,s=e('<div class="logindesignerwp-ai-preview-notification" style="position: absolute; top: 10px; left: 10px; right: 10px; z-index: 100; padding: 12px 16px; background: #22c55e; color: #fff; border-radius: 8px; display: flex; align-items: flex-start; gap: 10px; font-size: 13px; box-shadow: 0 4px 12px rgba(34, 197, 94, 0.4);"><span class="dashicons dashicons-yes-alt" style="flex-shrink: 0; margin-top: 2px;"></span><span style="flex: 1;">'+t+'</span><button type="button" style="background: none; border: none; color: white; cursor: pointer; padding: 0; font-size: 18px; line-height: 1;" onclick="jQuery(this).parent().fadeOut(200, function(){jQuery(this).remove();})">Ã—</button></div>');a.css("position","relative").prepend(s),setTimeout(function(){s.fadeOut(300,function(){e(this).remove()})},5e3)}else{var l=e('<div class="logindesignerwp-ai-status" style="margin-top: 10px; padding: 12px 16px; background: #dc2626; color: #fff; border-radius: 6px; display: flex; align-items: center; gap: 10px; font-size: 13px;"><span class="dashicons dashicons-warning"></span><span>'+(n.data||"Failed to generate theme.")+"</span></div>");i.after(l),setTimeout(function(){l.fadeOut(300,function(){e(this).remove()})},4e3)}},error:function(){r.remove();var n=e('<div class="logindesignerwp-ai-status" style="margin-top: 10px; padding: 12px 16px; background: #dc2626; color: #fff; border-radius: 6px; display: flex; align-items: center; gap: 10px; font-size: 13px;"><span class="dashicons dashicons-warning"></span><span>Request failed. Please check your connection.</span></div>');i.after(n),setTimeout(function(){n.fadeOut(300,function(){e(this).remove()})},4e3)},complete:function(){i.prop("disabled",!1),o.removeClass("dashicons-update dashicons-spin").addClass("dashicons-edit")}})}})}function m(){e(document).on("click",".logindesignerwp-ai-smart-theme",function(n){n.preventDefault();var i=e(this),o=i.find(".dashicons");i.closest(".logindesignerwp-ai-tool-card").find(".logindesignerwp-ai-status").remove();var t=e('<div class="logindesignerwp-ai-status" style="margin-top: 10px; padding: 12px 16px; background: #9333ea; color: #fff; border-radius: 6px; display: flex; align-items: center; gap: 10px; font-size: 13px; box-shadow: 0 2px 8px rgba(147, 51, 234, 0.3);"><span class="dashicons dashicons-update" style="animation: rotation 1s infinite linear;"></span><span class="status-text">Analyzing your background...</span></div>');i.after(t),i.prop("disabled",!0),o.removeClass("dashicons-art").addClass("dashicons-update dashicons-spin"),e.ajax({url:ajaxurl,type:"POST",data:{action:"logindesignerwp_generate_theme_from_bg",nonce:logindesignerwp_ajax.nonce},success:function(n){if(t.remove(),n.success){var o=n.data.theme,a=n.data.explanation||"";!function(n){var i={form_bg_color:{field:"form_bg_color",preview:"form_bg_color"},form_border_color:{field:"form_border_color",preview:"form_border_color"},button_bg:{field:"button_bg",preview:"button_bg"},button_text_color:{field:"button_text_color",preview:"button_text_color"},label_text_color:{field:"label_text_color",preview:"label_text_color"},input_bg_color:{field:"input_bg_color",preview:"input_bg_color"},input_text_color:{field:"input_text_color",preview:"input_text_color"},input_border_color:{field:"input_border_color",preview:"input_border_color"},below_form_link_color:{field:"below_form_link_color",preview:"below_form_link_color"}};if(e.each(n,function(n,o){var t=i[n];if(t){var a=e('[name="logindesignerwp_settings['+t.field+']"]');if(a.length&&(a.val(o),"string"==typeof o&&o.startsWith("#")))try{a.wpColorPicker("color",o)}catch(e){}b(t.preview,o)}}),void 0!==n.form_shadow){var o=e('[name="logindesignerwp_settings[form_shadow_enable]"]');o.length&&(o.prop("checked",n.form_shadow),b("form_shadow_enable",n.form_shadow?"1":""))}}(o);var r=n.data.message||"Theme applied!";a&&(r+=" ðŸ’¡ "+a),e(".logindesignerwp-ai-preview-notification").remove();var s=d,l=e('<div class="logindesignerwp-ai-preview-notification" style="position: absolute; top: 10px; left: 10px; right: 10px; z-index: 100; padding: 12px 16px; background: #22c55e; color: #fff; border-radius: 8px; display: flex; align-items: flex-start; gap: 10px; font-size: 13px; box-shadow: 0 4px 12px rgba(34, 197, 94, 0.4);"><span class="dashicons dashicons-yes-alt" style="flex-shrink: 0; margin-top: 2px;"></span><span style="flex: 1;">'+r+'</span><button type="button" style="background: none; border: none; color: white; cursor: pointer; padding: 0; font-size: 18px; line-height: 1;" onclick="jQuery(this).parent().fadeOut(200, function(){jQuery(this).remove();})">Ã—</button></div>');s.css("position","relative").prepend(l),setTimeout(function(){l.fadeOut(300,function(){e(this).remove()})},6e3)}else{var g=e('<div class="logindesignerwp-ai-status" style="margin-top: 10px; padding: 12px 16px; background: #dc2626; color: #fff; border-radius: 6px; display: flex; align-items: center; gap: 10px; font-size: 13px; box-shadow: 0 2px 8px rgba(220, 38, 38, 0.3);"><span class="dashicons dashicons-warning"></span><span>'+(n.data||"Failed to analyze background.")+"</span></div>");i.after(g),setTimeout(function(){g.fadeOut(300,function(){e(this).remove()})},4e3)}},error:function(){t.remove();var n=e('<div class="logindesignerwp-ai-status" style="margin-top: 10px; padding: 12px 16px; background: #dc2626; color: #fff; border-radius: 6px; display: flex; align-items: center; gap: 10px; font-size: 13px;"><span class="dashicons dashicons-warning"></span><span>Request failed. Please check your connection.</span></div>');i.after(n),setTimeout(function(){n.fadeOut(300,function(){e(this).remove()})},4e3)},complete:function(){i.prop("disabled",!1),o.removeClass("dashicons-update dashicons-spin").addClass("dashicons-art")}})})}function h(e){var n=function(e){if(!e)return null;var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:null}(e);if(!n)return 0;var i=n.r/255,o=n.g/255,t=n.b/255;return.2126*(i=i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4))+.7152*(o=o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4))+.0722*(t=t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))}function x(){var n=e(".logindesignerwp-tab"),i=e(".logindesignerwp-tab-content"),o=e(".logindesignerwp-wrap");requestAnimationFrame(function(){o.removeClass("is-loading")});var t=localStorage.getItem("ldwp_active_tab"),a=function(e){for(var n=e+"=",i=document.cookie.split(";"),o=0;o<i.length;o++){for(var t=i[o];" "===t.charAt(0);)t=t.substring(1,t.length);if(0===t.indexOf(n))return t.substring(n.length,t.length)}return null}("ldwp_active_tab");t&&t!==a&&k("ldwp_active_tab",t,365),n.on("click",function(o){o.preventDefault();var t=e(this),a=t.data("tab");n.removeClass("active"),i.removeClass("active").hide(),t.addClass("active"),e("#tab-"+a).addClass("active").show(),localStorage.setItem("ldwp_active_tab",a),k("ldwp_active_tab",a,365)})}function k(e,n,i){var o="";if(i){var t=new Date;t.setTime(t.getTime()+24*i*60*60*1e3),o="; expires="+t.toUTCString()}document.cookie=e+"="+(n||"")+o+"; path=/"}function y(){var n=e('input[name="logindesignerwp_settings[glass_enabled]"]'),o=e('input[name="logindesignerwp_settings[glass_blur]"]'),t=e('input[name="logindesignerwp_settings[glass_transparency]"]'),a=e('input[name="logindesignerwp_settings[glass_border]"]');function r(){var r=n.is(":checked"),s=o.val(),l=t.val(),g=a.is(":checked"),d=e('input[name="logindesignerwp_settings[form_bg_color]"]').val(),c=d||"#ffffff";if(r){var p=1-parseInt(l)/100,u=function(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,n,i,o){return n+n+i+i+o+o});var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:{r:255,g:255,b:255}}(c),b="rgba("+u.r+","+u.g+","+u.b+","+p+")";if(i.css({"background-color":b,"backdrop-filter":"blur("+s+"px)","-webkit-backdrop-filter":"blur("+s+"px)"}),g)i.css("border","1px solid rgba(255, 255, 255, 0.2)");else{var _=e('input[name="logindesignerwp_settings[form_border_color]"]').val();i.css("border","1px solid "+_)}}else{var f=e('input[name="logindesignerwp_settings[form_bg_color]"]').val(),w=e('input[name="logindesignerwp_settings[form_border_color]"]').val();i.css({"background-color":f,"backdrop-filter":"","-webkit-backdrop-filter":""}),i.css("border","1px solid "+w)}}n.on("change",r),o.on("input change",r),t.on("input change",r),a.on("change",r),e('input[name="logindesignerwp_settings[form_bg_color]"]').on("change keyup",function(){n.is(":checked")&&r()}),e('input[name="logindesignerwp_settings[form_border_color]"]').on("change keyup",function(){!n.is(":checked")||a.is(":checked")}),setTimeout(r,200)}e(document).ready(function(){var _,h,k;0!==e(".logindesignerwp-wrap").length&&(d=e(".logindesignerwp-preview-container"),n=e("#ldwp-preview-bg"),i=e("#ldwp-preview-form"),o=e("#ldwp-preview-logo"),e("#ldwp-preview-logo-img"),t=e("#ldwp-preview-label-user, #ldwp-preview-label-pass"),a=e("#ldwp-preview-input-user, #ldwp-preview-input-pass"),r=e("#ldwp-preview-button"),s=e("#ldwp-preview-links a"),s=e("#ldwp-preview-links a"),l=e(".logindesignerwp-preview-remember label"),g=e(".logindesignerwp-preview-social"),e(".ldwp-preview-social-btn"),p.init(),e('input[name="logindesignerwp_settings[background_color]"]').wpColorPicker({change:function(e,n){b("background_color",n.color.toString())}}),e('input[name="logindesignerwp_settings[background_gradient_1]"]').wpColorPicker({change:function(e,n){b("background_gradient_1",n.color.toString())}}),e('input[name="logindesignerwp_settings[background_gradient_2]"]').wpColorPicker({change:function(e,n){b("background_gradient_2",n.color.toString())}}),e('input[name="logindesignerwp_settings[background_gradient_3]"]').wpColorPicker({change:function(e,n){b("background_gradient_3",n.color.toString())}}),e('input[name="logindesignerwp_settings[form_bg_color]"]').wpColorPicker({change:function(e,n){b("form_bg_color",n.color.toString())}}),e('input[name="logindesignerwp_settings[form_border_color]"]').wpColorPicker({change:function(e,n){b("form_border_color",n.color.toString())}}),e('input[name="logindesignerwp_settings[label_text_color]"]').wpColorPicker({change:function(e,n){b("label_text_color",n.color.toString())}}),e('input[name="logindesignerwp_settings[input_bg_color]"]').wpColorPicker({change:function(e,n){b("input_bg_color",n.color.toString())}}),e('input[name="logindesignerwp_settings[input_text_color]"]').wpColorPicker({change:function(e,n){b("input_text_color",n.color.toString())}}),e('input[name="logindesignerwp_settings[input_border_color]"]').wpColorPicker({change:function(e,n){b("input_border_color",n.color.toString())}}),e('input[name="logindesignerwp_settings[input_border_focus]"]').wpColorPicker({change:function(e,n){b("input_border_focus",n.color.toString())}}),e('input[name="logindesignerwp_settings[button_bg]"]').wpColorPicker({change:function(e,n){b("button_bg",n.color.toString())}}),e('input[name="logindesignerwp_settings[button_bg_hover]"]').wpColorPicker({change:function(e,n){b("button_bg_hover",n.color.toString())}}),e('input[name="logindesignerwp_settings[button_text_color]"]').wpColorPicker({change:function(e,n){b("button_text_color",n.color.toString())}}),e('input[name="logindesignerwp_settings[below_form_link_color]"]').wpColorPicker({change:function(e,n){b("below_form_link_color",n.color.toString())}}),e('input[name="logindesignerwp_settings[logo_background_color]"]').wpColorPicker({change:function(n,i){var o=i.color.toString();b("logo_background_color",o),o&&e('input[name="logindesignerwp_settings[logo_background_enable]"]').val("1")},clear:function(){b("logo_background_color",""),e('input[name="logindesignerwp_settings[logo_background_enable]"]').val("0")}}),e('input[name="logindesignerwp_settings[background_overlay_color]"]').wpColorPicker({change:function(e,n){b("background_overlay_color",n.color.toString())},clear:function(){b("background_overlay_color","#000000")}}),e(document).on("click",".logindesignerwp-upload-image",function(n){n.preventDefault();var i=e(this).closest("td"),o=i.find(".logindesignerwp-image-id"),t=i.find(".logindesignerwp-image-preview"),a=i.find(".logindesignerwp-remove-image"),r=t.hasClass("logindesignerwp-logo-preview"),s=-1!==o.attr("name").indexOf("background_image");(_=wp.media({title:"Select Image",button:{text:"Use Image"},multiple:!1})).on("select",function(){var e=_.state().get("selection").first().toJSON();o.val(e.id);var n=e.sizes&&e.sizes.medium?e.sizes.medium.url:e.url;t.find("img").attr("src",n),t.show(),a.show();var i=e.sizes&&e.sizes.full?e.sizes.full.url:e.url;r?b("logo_image",i):s&&b("background_image",i)}),_.open()}),e(document).on("click",".logindesignerwp-remove-image",function(n){n.preventDefault();var i=e(this),o=i.closest("td"),t=o.find(".logindesignerwp-image-id"),a=o.find(".logindesignerwp-image-preview"),r=a.hasClass("logindesignerwp-logo-preview"),s=-1!==t.attr("name").indexOf("background_image");t.val("0"),a.hide(),i.hide(),r?b("logo_image",""):s&&b("background_image","")}),u(),e('input[name="logindesignerwp_settings[form_border_radius]"]').on("input change",function(){b("form_border_radius",e(this).val())}),e('input[name="logindesignerwp_settings[button_border_radius]"]').on("input change",function(){b("button_border_radius",e(this).val())}),e('input[name="logindesignerwp_settings[logo_width]"]').on("input change",function(){b("logo_width",e(this).val())}),e('textarea[name="logindesignerwp_settings[custom_message]"]').on("input change",function(){var n=e(this).val(),i=e("#ldwp-preview-custom-message");n.trim()?i.text(n).show():i.hide(),p.startUpdate(),setTimeout(function(){p.endUpdate()},100)}),e(document).on("click",".ldwp-corner-option",function(){var n=e(this),i=n.closest(".ldwp-corner-selector"),o=i.data("setting"),t=n.data("value");i.find(".ldwp-corner-option").removeClass("is-active"),n.addClass("is-active"),i.siblings(".ldwp-corner-value").val(t),o&&b(o,t)}),e(document).on("click",".ldwp-position-cell",function(){var n=e(this),i=n.data("x"),o=n.data("y");e(".ldwp-position-cell").removeClass("is-active"),n.addClass("is-active"),e("#ldwp-position-x").val(i),e("#ldwp-position-y").val(o),b("layout_position_x",i),b("layout_position_y",o)}),e(document).on("click",".ldwp-style-card",function(){var n=e(this),i=n.data("style");e(".ldwp-style-card").removeClass("is-active"),n.addClass("is-active"),e("#ldwp-layout-style").val(i),b("layout_style",i)}),e('input[name="logindesignerwp_settings[form_shadow_enable]"]').on("change",function(){b("form_shadow_enable",e(this).is(":checked"))}),e('input[name="logindesignerwp_settings[background_overlay_enable]"]').on("change",function(){var n=e(this).is(":checked");n?e(".logindesignerwp-overlay-options").show():e(".logindesignerwp-overlay-options").hide(),b("background_overlay_enable",n?1:0)}),e('input[name="logindesignerwp_settings[background_overlay_opacity]"]').on("input change",function(){var n=e(this).val();e(this).next(".logindesignerwp-range-value").text(n+"%"),b("background_overlay_opacity",n)}),r.on("mouseenter",function(){var n=d.data("button-hover")||e('input[name="logindesignerwp_settings[button_bg_hover]"]').val();e(this).css("background-color",n)}),r.on("mouseleave",function(){var n=d.data("button-bg")||e('input[name="logindesignerwp_settings[button_bg]"]').val();e(this).css("background-color",n)}),function(){var n=e(".logindesignerwp-preview-column"),i=e(".logindesignerwp-preview-sticky"),o=e(".logindesignerwp-settings-column");n.length&&i.length&&(e("#wpadminbar").length&&e("#wpadminbar").outerHeight(),e(window).on("scroll",t),e(window).on("resize",function(){i.css("width",n.width()+"px"),t()}),t());function t(){var t=n.offset().top,a=e(window).scrollTop(),r=o.outerHeight(),s=i.outerHeight(),l=n.width(),g=t+r-s-50;a>t-50&&a<g?i.addClass("is-sticky").css({position:"fixed",top:"50px",width:l+"px"}):a>=g?(i.removeClass("is-sticky").css({position:"absolute",top:r-s+"px",width:l+"px"}),n.css("position","relative")):i.removeClass("is-sticky").css({position:"relative",top:"0",width:"100%"})}}(),x(),e("#logindesignerwp-settings-form .logindesignerwp-card").each(function(){var n=e(this),i=n.find("h2").first(),o=n.attr("data-section-id");0===i.find(".toggle-indicator").length&&i.append('<span class="dashicons dashicons-arrow-down-alt2 toggle-indicator"></span>'),0===n.find(".logindesignerwp-card-content").length&&i.nextAll().wrapAll('<div class="logindesignerwp-card-content"></div>'),o&&"true"===localStorage.getItem("ldwp_collapsed_"+o)&&n.addClass("collapsed")}),e(document).on("click","#logindesignerwp-settings-form .logindesignerwp-card h2",function(n){if(!e(n.target).closest(".drag-handle, button, a, input").length){var i=e(this).closest(".logindesignerwp-card"),o=i.attr("data-section-id");i.toggleClass("collapsed"),o&&localStorage.setItem("ldwp_collapsed_"+o,i.hasClass("collapsed"))}}),function(){var n=e("#logindesignerwp-settings-form"),i=n.find(".logindesignerwp-actions");if(0!==n.length){var o=n.find(".logindesignerwp-card"),t=n.find(".logindesignerwp-pro-locked").length>0;if(t)localStorage.removeItem("ldwp_section_order"),o.each(function(){var i=e(this),o=n.find(".logindesignerwp-pro-locked").first();o.length&&i.index()>o.index()&&o.before(i)});else{var a=localStorage.getItem("ldwp_section_order");if(a)try{JSON.parse(a).forEach(function(e){var n=o.filter('[data-section-id="'+e+'"]');n.length&&i.before(n)})}catch(e){}o.each(function(){e(this).next().is(i)||e(this).next().hasClass("logindesignerwp-card")||i.before(e(this))})}n.sortable({items:".logindesignerwp-card",handle:".drag-handle",placeholder:"logindesignerwp-card ui-sortable-placeholder",tolerance:"pointer",cursor:"grabbing",opacity:.9,update:function(){if(!t){var i=[];n.find(".logindesignerwp-card").each(function(){var n=e(this).attr("data-section-id");n&&i.push(n)}),localStorage.setItem("ldwp_section_order",JSON.stringify(i))}}})}}(),h=e(".logindesignerwp-settings-column form").not("#logindesignerwp-ai-settings-form, #logindesignerwp-social-settings-form"),k=h.find("#submit"),0!==h.length&&h.on("submit",function(n){n.preventDefault();var i=e('<span class="spinner is-active" style="float:none; margin-left: 5px;"></span>');k.prop("disabled",!0).after(i);var o=h.serialize();o+="&action=logindesignerwp_save_settings",o+="&nonce="+(window.logindesignerwp_ajax?window.logindesignerwp_ajax.nonce:""),e.post(ajaxurl,o,function(n){if(i.remove(),k.prop("disabled",!1),n.success){p.markSaved();var o=e('<div class="notice notice-success is-dismissible" style="position: fixed; top: 40px; right: 20px; z-index: 9999; box-shadow: 0 2px 5px rgba(0,0,0,0.1);"><p>'+(n.data.message||"Settings saved")+"</p></div>");e("body").append(o),setTimeout(function(){o.fadeOut(function(){e(this).remove()})},3e3)}else alert(n.data||"Error saving settings.")}).fail(function(){i.remove(),k.prop("disabled",!1),alert("Ajax error. Please try again.")})}),y(),function(){var n=e("#ldwp-custom-height-toggle"),i=e(".logindesignerwp-height-slider"),o=e('input[name="logindesignerwp_settings[logo_height]"]');function t(){n.is(":checked")?(i.slideDown(200),o.val()&&"0"!=o.val()||(o.val(84).trigger("change"),o.next("output").text("84"))):(i.slideUp(200),o.val(0).trigger("change"),b("logo_width",e('input[name="logindesignerwp_settings[logo_width]"]').val()))}n.on("change",t),t();var a=e("#ldwp-logo-bg-toggle"),r=e("#ldwp-logo-bg-settings");a.on("change",function(){var e=a.is(":checked");e?r.show():r.hide(),b("logo_background_enable",e?"1":"0")}),a.length&&(a.is(":checked")?r.show():r.hide()),e(document).on("input",'.logindesignerwp-range-wrapper input[type="range"]',function(){var n=e(this),i=n.val();n.next("output").text(i);var o=n.attr("name").match(/\[(.*?)\]/);o&&o[1]&&b(o[1],i)})}(),function(){function n(){var n=e(".ldwp-preview-google").is(":visible"),i=e(".ldwp-preview-github").is(":visible");n||i?e("#ldwp-preview-social").show():e("#ldwp-preview-social").hide()}e("#logindesignerwp-social-layout").on("change",function(){b("social_login_layout",e(this).val())}),e("#logindesignerwp-social-shape").on("change",function(){b("social_login_shape",e(this).val())}),e("#logindesignerwp-social-style").on("change",function(){b("social_login_style",e(this).val())}),e('input[name="logindesignerwp_settings[google_login_enable]"]').on("change",function(){var i=e(this).is(":checked");e(".ldwp-preview-google").toggle(i),n()}),e('input[name="logindesignerwp_settings[github_login_enable]"]').on("change",function(){var i=e(this).is(":checked");e(".ldwp-preview-github").toggle(i),n()})}(),e(document).on("click",".logindesignerwp-ai-generate-bg",function(n){n.preventDefault();var i=e(this),o=i.find(".dashicons"),t=i.closest("td"),a=window.prompt("Describe the background image you want created by AI:");if(a){t.find(".logindesignerwp-ai-status").remove();var r=e('<div class="logindesignerwp-ai-status" style="margin-top: 10px; padding: 12px 16px; background: #2271b1; color: #fff; border-radius: 6px; display: flex; align-items: center; gap: 10px; font-size: 13px; box-shadow: 0 2px 8px rgba(34, 113, 177, 0.3);"><span class="dashicons dashicons-update" style="animation: rotation 1s infinite linear;"></span><span class="status-text">Generating your image with AI... This may take 15-30 seconds.</span></div>');i.after(r),i.prop("disabled",!0),o.removeClass("dashicons-superhero").addClass("dashicons-update dashicons-spin"),e.ajax({url:ajaxurl,type:"POST",data:{action:"logindesignerwp_generate_background",nonce:logindesignerwp_ajax.nonce,prompt:a},success:function(n){if(r.remove(),n.success){var o=n.data;e(".logindesignerwp-ai-preview-notification").remove();var t=d,a=e('<div class="logindesignerwp-ai-preview-notification" style="position: absolute; top: 10px; left: 10px; right: 10px; z-index: 100; padding: 16px; background: linear-gradient(135deg, #2271b1, #135e96); color: #fff; border-radius: 12px; box-shadow: 0 8px 24px rgba(34, 113, 177, 0.4);"><div style="display: flex; gap: 16px; align-items: flex-start;"><div style="flex-shrink: 0; width: 80px; height: 80px; border-radius: 8px; overflow: hidden; border: 2px solid rgba(255,255,255,0.3); box-shadow: 0 2px 8px rgba(0,0,0,0.2);"><img src="'+o.medium_url+'" style="width: 100%; height: 100%; object-fit: cover;"></div><div style="flex: 1;"><div style="font-weight: 600; font-size: 14px; margin-bottom: 6px;">âœ¨ Image Generated!</div><div style="font-size: 12px; opacity: 0.9; margin-bottom: 12px;">Use this as your login page background?</div><div style="display: flex; gap: 8px;"><button type="button" class="ai-bg-apply" style="background: #22c55e; color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-weight: 500; font-size: 13px; transition: all 0.2s;">Yes, Apply It</button><button type="button" class="ai-bg-cancel" style="background: rgba(255,255,255,0.2); color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-weight: 500; font-size: 13px; transition: all 0.2s;">No Thanks</button></div></div><button type="button" class="ai-bg-close" style="background: none; border: none; color: white; cursor: pointer; padding: 0; font-size: 20px; line-height: 1; opacity: 0.7;">Ã—</button></div></div>');t.css("position","relative").prepend(a),a.find(".ai-bg-apply").on("click",function(){var n=e(".logindesignerwp-bg-image"),i=e('input[name="logindesignerwp_settings[background_image_id]"]'),r=n.find(".logindesignerwp-image-preview"),s=n.find(".logindesignerwp-remove-image");i.val(o.id),r.find("img").attr("src",o.medium_url),r.show(),s.show(),e('input[name="logindesignerwp_settings[background_mode]"][value="image"]').prop("checked",!0).trigger("change"),c.bgImage=o.url,b("background_image",o.url),a.fadeOut(200,function(){e(this).remove();var n=e('<div class="logindesignerwp-ai-preview-notification" style="position: absolute; top: 10px; left: 10px; right: 10px; z-index: 100; padding: 12px 16px; background: #22c55e; color: #fff; border-radius: 8px; display: flex; align-items: center; gap: 10px; font-size: 13px; box-shadow: 0 4px 12px rgba(34, 197, 94, 0.4);"><span class="dashicons dashicons-yes-alt"></span><span>Background applied! Click Save to keep it.</span></div>');t.prepend(n),setTimeout(function(){n.fadeOut(300,function(){e(this).remove()})},4e3)})}),a.find(".ai-bg-cancel, .ai-bg-close").on("click",function(){a.fadeOut(200,function(){e(this).remove()})})}else{var s=e('<div class="logindesignerwp-ai-status" style="margin-top: 10px; padding: 12px 16px; background: #dc2626; color: #fff; border-radius: 6px; display: flex; align-items: center; gap: 10px; font-size: 13px;"><span class="dashicons dashicons-warning"></span><span>'+(n.data||"Failed to generate image.")+"</span></div>");i.after(s),setTimeout(function(){s.fadeOut(300,function(){e(this).remove()})},4e3)}},error:function(){r.remove();var n=e('<div class="logindesignerwp-ai-status" style="margin-top: 10px; padding: 12px 16px; background: #dc2626; color: #fff; border-radius: 6px; display: flex; align-items: center; gap: 10px; font-size: 13px;"><span class="dashicons dashicons-warning"></span><span>Request failed. Please check your connection.</span></div>');i.after(n),setTimeout(function(){n.fadeOut(300,function(){e(this).remove()})},4e3)},complete:function(){i.prop("disabled",!1),o.removeClass("dashicons-update dashicons-spin").addClass("dashicons-superhero")}})}}),v(),m(),function(){var n=e("#logindesignerwp-ai-settings-form"),i=n.find("#submit");0!==n.length&&n.on("submit",function(o){o.preventDefault();var t=e('<span class="spinner is-active" style="float:none; margin-left: 5px;"></span>');i.prop("disabled",!0).after(t);var a=n.serialize();a+="&action=logindesignerwp_save_ai_settings",a+="&nonce="+(window.logindesignerwp_ajax?window.logindesignerwp_ajax.nonce:""),e.post(ajaxurl,a,function(n){if(t.remove(),i.prop("disabled",!1),n.success){var o=e(".logindesignerwp-ai-active-badge");n.data.active?0===o.length&&e(".logindesignerwp-card-title-wrapper").append('<span class="logindesignerwp-ai-active-badge" style="background:#46b450; color:white; padding:2px 8px; border-radius:100px; font-size:10px; margin-left:10px; vertical-align:middle; text-transform:uppercase;">Active</span>'):o.remove();var a=e('[data-section-id="ai_tools"]');if(a.length){var r=a.find('[style*="fff8e5"]'),s=a.find('h2 span[style*="22c55e"]'),l=a.find(".logindesignerwp-ai-generate-bg, .logindesignerwp-ai-smart-theme, .logindesignerwp-ai-text-to-theme");n.data.active?(r.slideUp(200),0===s.length&&a.find(".logindesignerwp-pro-badge").after('<span style="background:#22c55e;color:white;padding:2px 8px;border-radius:100px;font-size:10px;margin-left:5px;vertical-align:middle;text-transform:uppercase;">Active</span>'),l.prop("disabled",!1)):(r.slideDown(200),s.remove(),l.prop("disabled",!0))}var g=e('<div class="notice notice-success is-dismissible" style="position: fixed; top: 40px; right: 20px; z-index: 9999; box-shadow: 0 2px 5px rgba(0,0,0,0.1);"><p>'+(n.data.message||"Settings saved")+"</p></div>");e("body").append(g),setTimeout(function(){g.fadeOut(function(){e(this).remove()})},3e3)}else alert(n.data||"Error saving settings.")}).fail(function(){t.remove(),i.prop("disabled",!1),alert("Ajax error. Please try again.")})})}(),function(){var n=e("#logindesignerwp-social-settings-form"),i=n.find("#submit");0!==n.length&&n.on("submit",function(o){o.preventDefault();var t=e('<span class="spinner is-active" style="float:none; margin-left: 5px;"></span>');i.prop("disabled",!0).after(t);var a=n.serialize();a+="&action=logindesignerwp_save_social_settings",e.post(ajaxurl,a,function(n){if(t.remove(),i.prop("disabled",!1),n.success){var o=e('<div class="notice notice-success is-dismissible" style="position: fixed; top: 40px; right: 20px; z-index: 9999; box-shadow: 0 2px 5px rgba(0,0,0,0.1);"><p>'+(n.data.message||"Settings saved")+"</p></div>");e("body").append(o),setTimeout(function(){o.fadeOut(function(){e(this).remove()})},3e3)}else alert(n.data||"Error saving settings.")}).fail(function(){t.remove(),i.prop("disabled",!1),alert("Ajax error. Please try again.")})})}(),e(document).on("click",".logindesignerwp-reset-defaults",function(n){if(n.preventDefault(),confirm("Are you sure you want to reset all login page settings to WordPress defaults?\n\nThis will remove all your customizations and cannot be undone.")){var i=e(this),o=i.html();i.prop("disabled",!0),i.html('<span class="dashicons dashicons-update dashicons-spin" style="line-height: 1.4; margin-right: 4px;"></span> Resetting...'),e.ajax({url:ajaxurl,type:"POST",data:{action:"logindesignerwp_reset_defaults",nonce:logindesignerwp_ajax.nonce},success:function(e){e.success?(alert("Settings have been reset to WordPress defaults. The page will now reload."),window.location.reload()):(alert("Error: "+(e.data||"Failed to reset settings.")),i.prop("disabled",!1),i.html(o))},error:function(){alert("Request failed. Please check your connection and try again."),i.prop("disabled",!1),i.html(o)}})}}),window.ldwpApplyPreview=w,window.ldwpUpdatePreview=b,window.ldwpUpdatePreviewBatch=function(n){window.ldwpIsBatchUpdating=!0;try{e.each(n,function(e,n){b(e,n,!0)}),f(n.background_mode||c.bgMode||"solid",n);var i=e(".logindesignerwp-preview-form");void 0!==n.form_border_radius&&i.css("border-radius",n.form_border_radius+"px"),void 0!==n.form_border_color&&i.css("border","1px solid "+n.form_border_color),void 0!==n.form_bg_color&&i.css("background-color",n.form_bg_color),void 0!==n.button_bg&&e(".logindesignerwp-preview-button").css("background-color",n.button_bg),void 0!==n.button_text_color&&e(".logindesignerwp-preview-button").css("color",n.button_text_color),void 0!==n.button_border_radius&&e(".logindesignerwp-preview-button").css("border-radius",n.button_border_radius+"px"),void 0!==n.label_text_color&&e(".logindesignerwp-preview-label").css("color",n.label_text_color),void 0!==n.input_bg_color&&e(".logindesignerwp-preview-input").css("background-color",n.input_bg_color),void 0!==n.input_text_color&&e(".logindesignerwp-preview-input").css("color",n.input_text_color),void 0!==n.input_border_color&&e(".logindesignerwp-preview-input").css("border-color",n.input_border_color),void 0!==n.below_form_link_color&&e(".logindesignerwp-preview-links a, #ldwp-preview-below-link").css("color",n.below_form_link_color);var o=1==n.glass_enabled||"1"===n.glass_enabled||!0===n.glass_enabled,t=void 0!==n.glass_blur?n.glass_blur:10,a=void 0!==n.glass_transparency?n.glass_transparency:85,r=e('input[name="logindesignerwp_settings[glass_enabled]"]');r.length&&r.prop("checked",o).trigger("change"),e('input[name="logindesignerwp_settings[glass_blur]"]').val(t),e('input[name="logindesignerwp_settings[glass_transparency]"]').val(a);i=e(".logindesignerwp-preview-form");if(o){var s=n.form_bg_color||"#ffffff";if(0===s.indexOf("rgba"))i.css({"background-color":s,"backdrop-filter":"blur("+t+"px)","-webkit-backdrop-filter":"blur("+t+"px)"});else{var l=1-parseInt(a)/100,g=s.replace("#","");3===g.length&&(g=g[0]+g[0]+g[1]+g[1]+g[2]+g[2]);var d="rgba("+(parseInt(g.substring(0,2),16)||255)+","+(parseInt(g.substring(2,4),16)||255)+","+(parseInt(g.substring(4,6),16)||255)+","+l+")";i.css({"background-color":d,"backdrop-filter":"blur("+t+"px)","-webkit-backdrop-filter":"blur("+t+"px)"})}}else{var p=n.form_bg_color||"#ffffff";i.css({"background-color":p,"backdrop-filter":"","-webkit-backdrop-filter":""})}}finally{window.ldwpIsBatchUpdating=!1}},function(){var n=e("#ldwp-preview-captcha-container"),i=e("#ldwp-security-container"),o=i.find('input[name="enabled"]'),r=e("#ldwp-security-method"),s=i.find('input[name="basic_math"]');function l(){var i=o.is(":checked"),l=r.val();if(n.empty().hide(),i){if("basic"===l){if(s.is(":checked")){var g='<div class="logindesignerwp-preview-field"><label style="display:block; margin-bottom: 0.5em;">Math: 5 + 3 = ?</label><input type="text" class="input" size="2" value=""></div>';n.html(g).show();var d=n.find("input"),c=n.find("label"),p=e('input[name="logindesignerwp_settings[input_bg_color]"]').val(),u=e('input[name="logindesignerwp_settings[input_text_color]"]').val(),b=e('input[name="logindesignerwp_settings[input_border_color]"]').val(),_=e('input[name="logindesignerwp_settings[label_text_color]"]').val();d.css({"background-color":p,color:u,border:"1px solid "+b}),c.css("color",_)}}else if("turnstile"===l){var f='<div style="display:flex; justify-content:center; width:100%; margin-bottom: 20px;"><div style="width: 300px; height: 65px; background: #fff; border: 1px solid #dcdcdc; border-radius: 4px; display: flex; align-items: center; justify-content: center; box-shadow: 0 1px 1px rgba(0,0,0,0.05);"><div style="display:flex; align-items:center; gap:10px;"><div style="width:24px; height:24px; border:2px solid #ccc; border-radius:50%;"></div><span style="font-family:sans-serif; color:#333; font-size:14px;">Verify you are human</span></div></div></div>';n.html(f).show()}else if("recaptcha"===l){var w='<div style="display:flex; justify-content:center; width:100%; margin-bottom: 20px;"><div style="width: 302px; height: 74px; background: #f9f9f9; border: 1px solid #d3d3d3; border-radius: 3px; display: flex; align-items: center; justify-content: space-between; padding: 0 12px; box-shadow: 0 1px 1px rgba(0,0,0,0.08);"><div style="display:flex; align-items:center; gap:12px;"><div style="width:24px; height:24px; border:2px solid #c1c1c1; border-radius:2px; background:#fff;"></div><span style="font-family:Roboto, helvetica, arial, sans-serif; color: #000; font-size:14px; font-weight: 500;">I\'m not a robot</span></div><div style="display:flex; flex-direction:column; align-items:center; opacity: 0.6;"><span style="font-size:24px; color: #555; line-height:1;margin-bottom:2px;" class="dashicons dashicons-update"></span><span style="font-size:10px; color: #555;">reCAPTCHA</span></div></div></div>';n.html(w).show()}void 0!==a&&(a=e('#ldwp-preview-input-user, #ldwp-preview-input-pass, #ldwp-preview-captcha-container input[type="text"]'),t=e("#ldwp-preview-label-user, #ldwp-preview-label-pass, #ldwp-preview-captcha-container label"))}}o.on("change",l),r.on("change",l),s.on("change",l),l()}(),setTimeout(w,100))}),e(document).ready(function(){e(document).on("click",".logindesignerwp-preset-card",function(n){if(!e(n.target).hasClass("logindesignerwp-preset-delete-icon")){var i=e(this),o=i.data("preset");i.hasClass("is-locked")||i.hasClass("is-loading")||(e(".logindesignerwp-preset-card").removeClass("active"),i.addClass("active is-loading"),i.css("opacity","0.7"),e.ajax({url:ajaxurl,type:"POST",data:{action:"logindesignerwp_apply_preset",preset:o,nonce:window.logindesignerwp_ajax?window.logindesignerwp_ajax.nonce:""},success:function(n){if(i.removeClass("is-loading").css("opacity","1"),n.success){var o=n.data.settings;window.ldwpUpdatePreviewBatch?window.ldwpUpdatePreviewBatch(o):f(null,o),e.each(o,function(n,i){var o=e('[name="logindesignerwp_settings['+n+']"]');if(o.length){if(o.is(":checkbox"))o.prop("checked",!!i);else if(o.is(":radio"))o.filter('[value="'+i+'"]').prop("checked",!0);else if(o.val(i),o.hasClass("wp-color-picker")&&o.data("wpWpColorPicker"))try{o.wpColorPicker("color",i)}catch(e){}}else"background_mode"===n&&(e(".ldwp-bg-mode-value").val(i),e(".ldwp-bg-type-option").removeClass("active"),e('.ldwp-bg-type-option[data-value="'+i+'"]').addClass("active"))}),n.data.background_image_url?(e(".logindesignerwp-image-preview img").attr("src",n.data.background_image_url),e(".logindesignerwp-image-preview").show(),e(".logindesignerwp-remove-image").show()):0!=o.background_image_id&&o.background_image_id||(e(".logindesignerwp-image-preview").hide(),e(".logindesignerwp-remove-image").hide())}else alert(n.data||"Error applying preset.")},error:function(){i.removeClass("is-loading").css("opacity","1"),alert("Connection error")}}))}}),e(document).on("click",".logindesignerwp-preset-delete-icon",function(n){if(n.preventDefault(),n.stopPropagation(),confirm("Are you sure you want to delete this custom preset?")){var i=e(this).closest(".logindesignerwp-preset-card"),o=i.data("preset");i.css("opacity","0.5"),e.post(ajaxurl,{action:"logindesignerwp_delete_preset",preset:o,nonce:window.logindesignerwp_ajax?window.logindesignerwp_ajax.nonce:""},function(n){n.success?i.fadeOut(300,function(){e(this).remove()}):(alert(n.data),i.css("opacity","1"))})}})})}(jQuery);